{
  "title": "Enhancing Security and User Experience: Why Browser Extensions Should Have an Associated Website",
  "publishedAt": "2023-11-25T00:00:00.000Z",
  "updatedAt": "2023-11-25T00:00:00.000Z",
  "description": "Discover why managing user onboarding, account management, and subscriptions from a separate website can enhance the security and user experience of your browser extension.",
  "image": {
    "filePath": "../public/profile.png",
    "relativeFilePath": "../../public/profile.png",
    "format": "png",
    "height": 1024,
    "width": 1024,
    "aspectRatio": 1,
    "blurhashDataUrl": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA+UlEQVR4nDXOP0gCYRjH8be5hpaCqCUCawjiaqjBtSUInAoiqK2xvUEcWyIIClzaioY0EbzT/k0ph0UnSRiXkYKciHKTnoP6fn3h8APPAz+e3/CInm1Qz95Sf0/ilnJ8vT6QNeKkkvekHnUETgHv38SxnnD0C7anxwmtBCiaH+TNHKJbtcC1qaUvyUT2SEcO2NnQWJiaoVT8RUj3j4oRxQjNMTsm2F1fJTA5gTavsbS8hRh4TaxEFOhi59+Q7TInm2sEF4M0Wh31g/J8c6W20vnBc74p6zFOj8+RUvoFkGp8n/E7dehzdp1RiVHB9xLep5CIcXQYVsk3BHqjyD2wCBcLAAAAK3RFWHRDcmVhdGlvbiBUaW1lAFNhdCwgMjUgTm92IDIwMjMgMTc6NDg6MzMgR01U1mZotAAAAC50RVh0U29mdHdhcmUAZ2l0aHViLmNvbS9tYXRtZW4vSW1hZ2VTY3JpcHQgdjEuMi4xNujZvYYAAAAASUVORK5CYII="
  },
  "isPublished": true,
  "author": "Oisín Thomas Morrin",
  "tags": [
    "Web Development",
    "React",
    "Browser Extension",
    "Plasmo",
    "\r"
  ],
  "majorTag": "Tech",
  "body": {
    "raw": "\r\nBrowser extensions have a bad reputation for security and safety, from both the users' and developer's perspective. There are critical aspects of a user experience—particularly account management and payments—that you can do on an extension, but if you really care about the experience and safety of your end user, you won't. Instead, you should do it using a separate webpage. In this article, I will discuss why and how you should manage your user onboarding, account management and subscriptions from a website associated with your extension.\r\n\r\n### What Framework should I use?\r\n\r\nExtensions have been seen as the Wild West of Product Development. Most extensions are developed in some JavaScript framework: svelt, Nextjs, etc., or even vanilla js with no dedicated environment or framework until recently. [Plasmo]([Supercharge your browser extension development – Plasmo](https://www.plasmo.com/)) is a new framework for extension development that promises cross-browser support along with environment testing and CI/CD, and for anyone who wants to dive into the world of extensions, I'd highly recommend starting here. There is a vibrant community on discord and the main framework is constantly expanding, yet it very stable for most browsers (it is great with chromium-based browsers and Firefox—but Safari is still buggy).\r\n\r\nAdditionally, Plasmo provide some great features out of the box including import management, messengers, storage API, extension pages and tab pages and a content-script UI functionality in which you can use React (and not have to fudge around with the vanilla trio of html-css-js).\r\n\r\n### What are the Problems?\r\n\r\nGoogle Chrome has made efforts to make the landscape of chrome extensions more safe through the update from Manifest Version 2 to 3, but a lot of things still fall short or simply obfuscate the development and impact negatively the user experience. These issues become even more prominent when you are developing a cross-browser extension. Added to this, the community for extension developers has been rather isolated and under-developed.\r\n\r\n#### Cross-origin resource sharing (CORS)\r\n\r\nYou have the eternal problems of CORS. CORS is a protocol that decides whether a cross-origin request (e.g. a request from [https://adomain.com](https://anotherdomain.com/) to [https://otherdomain.com](https://otherdomain.com/)) should be allowed.\r\n\r\n#### Content Security Policy (CSP)\r\n\r\nCSP is layer of security that helps to detect and mitigate certain types of attacks, including Cross-Site Scripting ([XSS](https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting)) and data injection attacks. These attacks are used for everything from data theft, to site defacement, to malware distribution.\r\n\r\nYou face these depending on where you are fetching data:\r\n<table>\r\n    <thead>\r\n        <tr>\r\n            <th>Origin</th>\r\n            <th>CSP</th>\r\n            <th>Cors</th>\r\n            <th></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        <tr>\r\n            <td>Extension Pages</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n        </tr>\r\n        <tr>\r\n            <td>Background Script Worker</td>\r\n            <td></td>\r\n            <td>✔️</td>\r\n            <td></td>\r\n        </tr>\r\n        <tr>\r\n            <td>Content Script</td>\r\n            <td>✔️</td>\r\n            <td>✔️</td>\r\n            <td></td>\r\n        </tr>\r\n    </tbody>\r\n</table>\r\n\r\n\r\n\r\n\r\n\\*this does not include CORS issues you run into from the server side\r\n\r\n#### Remote Code Execution\r\n\r\nDue to [Manifest v3's restriction with remote code execution](https://developer.chrome.com/docs/extensions/mv3/intro/mv3-overview/#remotely-hosted-code), all code executed by the extension must be present in the extension’s package uploaded to the webstore and server communication that could potentially changing extension behaviour will still be allowed. This means there are limited options to have integrations like Stripe, Hotjar etc. whereby a script is called in at runtime.\r\n\r\n### What They Don't Tell You Explicitly\r\n\r\nAll of this put together means that:\r\n\r\n- extension analytics and logging don't give you the same access to information. For example, you won't be able to have heatmaps etc of users going through an onboarding flow.\r\n- using third party auth providers is out of the question because you don't have a backend for redirects, and popups are injected onto the page (which violates CSP).\r\n- having a PCI-compliant payment system, like Stripe or Paddle, integrated into an extension is awkward... at best you can use Payment Links in Stripe—which doesn't give you the same granularity of control as managing the whole checkout experience does.\r\n\r\nAll of these issues are solved problems and perfectly workable from a website though. After looking at some of the most successful consumer browser extensions, we see this being used in Grammarly and Toucan. Therefore, I suggest a system where the extension communicates with a website that manages auth, account and subscription management via cookies.\r\n\r\n<div\r\n  style={{\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    textAlign: \"center\",\r\n  }}\r\n>\r\n  <Image\r\n    src=\"/Backend for Chrome Extension.png\"\r\n    width=\"618\"\r\n    height=\"404\"\r\n    alt=\"Architecture of a Browser Extension with a Backend using a Website for Authentication\"\r\n    sizes=\"100vw\"\r\n  />\r\n</div>\r\n\r\nWe can see that the website handles the authentication and stores cookies (JWT tokens) that can be used in the extension to verify the user and access their user data. This model is similar to the one suggested by Plasmo in collaboration with [PropelAuth](https://www.plasmo.com/blog/posts/chrome-extension-auth-boilerplate-propelauth)—whereby the authentication is handled by a website and the information is fed back to the extension, just without the price-tag.\r\n\r\n### Check out the example :)\r\n\r\nTo illustrate this point simply, I have set up a project for a website and an extension that uses Supabase as a backend, and simply pass a user-id across from the website to the extension.\r\n\r\n<div\r\n  style={{\r\n    width: \"100%\",\r\n    height: 0,\r\n    paddingBottom: \"60%\",\r\n    position: \"relative\",\r\n    marginBottom: \"2rem\"\r\n\r\n  }}\r\n>\r\n<video autoPlay loop  style={{ width: \"100%\", height: \"100%\", position: \"absolute\" }}>\r\n        <source src=\"/extension_with_cookies.mp4\" />\r\n      </video>\r\n</div>\r\n\r\n  \r\n\r\n[React + Supabase Website](https://github.com/OisinThomasMorrin/react-auth-with-supabase)\r\n\r\n[Plasmo Extension](https://github.com/OisinThomasMorrin/cookie-auth) \r\n\r\nThis example is without checking any user data, or validating tokens etc, but is a nice way to consolidate the idea of sharing the data in a secure way that can be seamless. Another point is that if your extension has a backend, it can be best to not house the database client directly in the extension and instead use tokens for validation, rate limiting and calling the data—you can never be too careful with people's data.\r\n\r\n### Conclusions\r\n\r\nI hope this article was useful for some developers in the extension space. I had to go through a lot of these learnings from this through mistakes, as it is so difficult to find resources on the topic. If anyone has any suggestions, recommendations or critiques, I'd love to hear them; the space is new and vibrant and there is so much more to be done in terms of developing the frameworks and best practices that underpin browser extensions.\r\n\r\n### Reading and Resources\r\n\r\n- [Content Security Policy (CSP) - HTTP | MDN (mozilla.org)](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)\r\n- [Chrome Extension Authentication Boilerplate using PropelAuth (plasmo.com)](https://www.plasmo.com/blog/posts/chrome-extension-auth-boilerplate-propelauth)\r\n- [Remotely-hosted code (google.com)](https://groups.google.com/a/chromium.org/g/chromium-extensions/c/ks--r5hDNQ0)\r\n- [Overview - PropelAuth](https://docs.propelauth.com/overview)\r\n- [React + Supabase Website](https://github.com/OisinThomasMorrin/react-auth-with-supabase)\r\n- [Plasmo Extension](https://github.com/OisinThomasMorrin/cookie-auth)\r\n",
    "code": "var Component=(()=>{var cn=Object.create;var j=Object.defineProperty;var un=Object.getOwnPropertyDescriptor;var dn=Object.getOwnPropertyNames;var fn=Object.getPrototypeOf,mn=Object.prototype.hasOwnProperty;var z=(c,t)=>()=>(t||c((t={exports:{}}).exports,t),t.exports),bn=(c,t)=>{for(var m in t)j(c,m,{get:t[m],enumerable:!0})},Ne=(c,t,m,y)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let x of dn(t))!mn.call(c,x)&&x!==m&&j(c,x,{get:()=>t[x],enumerable:!(y=un(t,x))||y.enumerable});return c};var pn=(c,t,m)=>(m=c!=null?cn(fn(c)):{},Ne(t||!c||!c.__esModule?j(m,\"default\",{value:c,enumerable:!0}):m,c)),hn=c=>Ne(j({},\"__esModule\",{value:!0}),c);var Ce=z((Cn,ve)=>{ve.exports=React});var ke=z(G=>{\"use strict\";(function(){\"use strict\";var c=Ce(),t=Symbol.for(\"react.element\"),m=Symbol.for(\"react.portal\"),y=Symbol.for(\"react.fragment\"),x=Symbol.for(\"react.strict_mode\"),H=Symbol.for(\"react.profiler\"),X=Symbol.for(\"react.provider\"),K=Symbol.for(\"react.context\"),E=Symbol.for(\"react.forward_ref\"),A=Symbol.for(\"react.suspense\"),I=Symbol.for(\"react.suspense_list\"),U=Symbol.for(\"react.memo\"),F=Symbol.for(\"react.lazy\"),Ue=Symbol.for(\"react.offscreen\"),J=Symbol.iterator,Re=\"@@iterator\";function Te(e){if(e===null||typeof e!=\"object\")return null;var n=J&&e[J]||e[Re];return typeof n==\"function\"?n:null}var v=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(e){{for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];Se(\"error\",e,o)}}function Se(e,n,o){{var i=v.ReactDebugCurrentFrame,a=i.getStackAddendum();a!==\"\"&&(n+=\"%s\",o=o.concat([a]));var u=o.map(function(l){return String(l)});u.unshift(\"Warning: \"+n),Function.prototype.apply.call(console[e],console,u)}}var Pe=!1,Oe=!1,je=!1,Ae=!1,Ie=!1,Q;Q=Symbol.for(\"react.module.reference\");function Fe(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===y||e===H||Ie||e===x||e===A||e===I||Ae||e===Ue||Pe||Oe||je||typeof e==\"object\"&&e!==null&&(e.$$typeof===F||e.$$typeof===U||e.$$typeof===X||e.$$typeof===K||e.$$typeof===E||e.$$typeof===Q||e.getModuleId!==void 0))}function We(e,n,o){var i=e.displayName;if(i)return i;var a=n.displayName||n.name||\"\";return a!==\"\"?o+\"(\"+a+\")\":o}function Z(e){return e.displayName||\"Context\"}function _(e){if(e==null)return null;if(typeof e.tag==\"number\"&&b(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case y:return\"Fragment\";case m:return\"Portal\";case H:return\"Profiler\";case x:return\"StrictMode\";case A:return\"Suspense\";case I:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case K:var n=e;return Z(n)+\".Consumer\";case X:var o=e;return Z(o._context)+\".Provider\";case E:return We(e,e.render,\"ForwardRef\");case U:var i=e.displayName||null;return i!==null?i:_(e.type)||\"Memo\";case F:{var a=e,u=a._payload,l=a._init;try{return _(l(u))}catch{return null}}}return null}var N=Object.assign,w=0,ee,ne,re,te,oe,ie,se;function le(){}le.__reactDisabledLog=!0;function Me(){{if(w===0){ee=console.log,ne=console.info,re=console.warn,te=console.error,oe=console.group,ie=console.groupCollapsed,se=console.groupEnd;var e={configurable:!0,enumerable:!0,value:le,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}w++}}function Ye(){{if(w--,w===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:N({},e,{value:ee}),info:N({},e,{value:ne}),warn:N({},e,{value:re}),error:N({},e,{value:te}),group:N({},e,{value:oe}),groupCollapsed:N({},e,{value:ie}),groupEnd:N({},e,{value:se})})}w<0&&b(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var W=v.ReactCurrentDispatcher,M;function R(e,n,o){{if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\\n( *(at )?)/);M=i&&i[1]||\"\"}return`\n`+M+e}}var Y=!1,T;{var $e=typeof WeakMap==\"function\"?WeakMap:Map;T=new $e}function ae(e,n){if(!e||Y)return\"\";{var o=T.get(e);if(o!==void 0)return o}var i;Y=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var u;u=W.current,W.current=null,Me();try{if(n){var l=function(){throw Error()};if(Object.defineProperty(l.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(l,[])}catch(g){i=g}Reflect.construct(e,[],l)}else{try{l.call()}catch(g){i=g}e.call(l.prototype)}}else{try{throw Error()}catch(g){i=g}e()}}catch(g){if(g&&i&&typeof g.stack==\"string\"){for(var s=g.stack.split(`\n`),p=i.stack.split(`\n`),d=s.length-1,f=p.length-1;d>=1&&f>=0&&s[d]!==p[f];)f--;for(;d>=1&&f>=0;d--,f--)if(s[d]!==p[f]){if(d!==1||f!==1)do if(d--,f--,f<0||s[d]!==p[f]){var h=`\n`+s[d].replace(\" at new \",\" at \");return e.displayName&&h.includes(\"<anonymous>\")&&(h=h.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&T.set(e,h),h}while(d>=1&&f>=0);break}}}finally{Y=!1,W.current=u,Ye(),Error.prepareStackTrace=a}var k=e?e.displayName||e.name:\"\",ye=k?R(k):\"\";return typeof e==\"function\"&&T.set(e,ye),ye}function Ve(e,n,o){return ae(e,!1)}function Be(e){var n=e.prototype;return!!(n&&n.isReactComponent)}function S(e,n,o){if(e==null)return\"\";if(typeof e==\"function\")return ae(e,Be(e));if(typeof e==\"string\")return R(e);switch(e){case A:return R(\"Suspense\");case I:return R(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case E:return Ve(e.render);case U:return S(e.type,n,o);case F:{var i=e,a=i._payload,u=i._init;try{return S(u(a),n,o)}catch{}}}return\"\"}var P=Object.prototype.hasOwnProperty,ce={},ue=v.ReactDebugCurrentFrame;function O(e){if(e){var n=e._owner,o=S(e.type,e._source,n?n.type:null);ue.setExtraStackFrame(o)}else ue.setExtraStackFrame(null)}function Le(e,n,o,i,a){{var u=Function.call.bind(P);for(var l in e)if(u(e,l)){var s=void 0;try{if(typeof e[l]!=\"function\"){var p=Error((i||\"React class\")+\": \"+o+\" type `\"+l+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[l]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw p.name=\"Invariant Violation\",p}s=e[l](n,l,i,o,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(d){s=d}s&&!(s instanceof Error)&&(O(a),b(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",i||\"React class\",o,l,typeof s),O(null)),s instanceof Error&&!(s.message in ce)&&(ce[s.message]=!0,O(a),b(\"Failed %s type: %s\",o,s.message),O(null))}}}var qe=Array.isArray;function $(e){return qe(e)}function ze(e){{var n=typeof Symbol==\"function\"&&Symbol.toStringTag,o=n&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return o}}function Ge(e){try{return de(e),!1}catch{return!0}}function de(e){return\"\"+e}function fe(e){if(Ge(e))return b(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",ze(e)),de(e)}var D=v.ReactCurrentOwner,He={key:!0,ref:!0,__self:!0,__source:!0},me,be,V;V={};function Xe(e){if(P.call(e,\"ref\")){var n=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(n&&n.isReactWarning)return!1}return e.ref!==void 0}function Ke(e){if(P.call(e,\"key\")){var n=Object.getOwnPropertyDescriptor(e,\"key\").get;if(n&&n.isReactWarning)return!1}return e.key!==void 0}function Je(e,n){if(typeof e.ref==\"string\"&&D.current&&n&&D.current.stateNode!==n){var o=_(D.current.type);V[o]||(b('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',_(D.current.type),e.ref),V[o]=!0)}}function Qe(e,n){{var o=function(){me||(me=!0,b(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};o.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:o,configurable:!0})}}function Ze(e,n){{var o=function(){be||(be=!0,b(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};o.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:o,configurable:!0})}}var en=function(e,n,o,i,a,u,l){var s={$$typeof:t,type:e,key:n,ref:o,props:l,_owner:u};return s._store={},Object.defineProperty(s._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(s,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function nn(e,n,o,i,a){{var u,l={},s=null,p=null;o!==void 0&&(fe(o),s=\"\"+o),Ke(n)&&(fe(n.key),s=\"\"+n.key),Xe(n)&&(p=n.ref,Je(n,a));for(u in n)P.call(n,u)&&!He.hasOwnProperty(u)&&(l[u]=n[u]);if(e&&e.defaultProps){var d=e.defaultProps;for(u in d)l[u]===void 0&&(l[u]=d[u])}if(s||p){var f=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;s&&Qe(l,f),p&&Ze(l,f)}return en(e,s,p,a,i,D.current,l)}}var B=v.ReactCurrentOwner,pe=v.ReactDebugCurrentFrame;function C(e){if(e){var n=e._owner,o=S(e.type,e._source,n?n.type:null);pe.setExtraStackFrame(o)}else pe.setExtraStackFrame(null)}var L;L=!1;function q(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===t}function he(){{if(B.current){var e=_(B.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function rn(e){{if(e!==void 0){var n=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),o=e.lineNumber;return`\n\nCheck your code at `+n+\":\"+o+\".\"}return\"\"}}var _e={};function tn(e){{var n=he();if(!n){var o=typeof e==\"string\"?e:e.displayName||e.name;o&&(n=`\n\nCheck the top-level render call using <`+o+\">.\")}return n}}function ge(e,n){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var o=tn(n);if(_e[o])return;_e[o]=!0;var i=\"\";e&&e._owner&&e._owner!==B.current&&(i=\" It was passed a child from \"+_(e._owner.type)+\".\"),C(e),b('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',o,i),C(null)}}function xe(e,n){{if(typeof e!=\"object\")return;if($(e))for(var o=0;o<e.length;o++){var i=e[o];q(i)&&ge(i,n)}else if(q(e))e._store&&(e._store.validated=!0);else if(e){var a=Te(e);if(typeof a==\"function\"&&a!==e.entries)for(var u=a.call(e),l;!(l=u.next()).done;)q(l.value)&&ge(l.value,n)}}}function on(e){{var n=e.type;if(n==null||typeof n==\"string\")return;var o;if(typeof n==\"function\")o=n.propTypes;else if(typeof n==\"object\"&&(n.$$typeof===E||n.$$typeof===U))o=n.propTypes;else return;if(o){var i=_(n);Le(o,e.props,\"prop\",i,e)}else if(n.PropTypes!==void 0&&!L){L=!0;var a=_(n);b(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",a||\"Unknown\")}typeof n.getDefaultProps==\"function\"&&!n.getDefaultProps.isReactClassApproved&&b(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function sn(e){{for(var n=Object.keys(e.props),o=0;o<n.length;o++){var i=n[o];if(i!==\"children\"&&i!==\"key\"){C(e),b(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",i),C(null);break}}e.ref!==null&&(C(e),b(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),C(null))}}function ln(e,n,o,i,a,u){{var l=Fe(e);if(!l){var s=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(s+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var p=rn(a);p?s+=p:s+=he();var d;e===null?d=\"null\":$(e)?d=\"array\":e!==void 0&&e.$$typeof===t?(d=\"<\"+(_(e.type)||\"Unknown\")+\" />\",s=\" Did you accidentally export a JSX literal instead of a component?\"):d=typeof e,b(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",d,s)}var f=nn(e,n,o,a,u);if(f==null)return f;if(l){var h=n.children;if(h!==void 0)if(i)if($(h)){for(var k=0;k<h.length;k++)xe(h[k],e);Object.freeze&&Object.freeze(h)}else b(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else xe(h,e)}return e===y?sn(f):on(f),f}}var an=ln;G.Fragment=y,G.jsxDEV=an})()});var De=z((wn,we)=>{\"use strict\";we.exports=ke()});var Nn={};bn(Nn,{default:()=>xn,frontmatter:()=>_n});var r=pn(De()),_n={title:\"Enhancing Security and User Experience: Why Browser Extensions Should Have an Associated Website\",description:\"Discover why managing user onboarding, account management, and subscriptions from a separate website can enhance the security and user experience of your browser extension.\",publishedAt:\"2023-11-25\",updatedAt:\"2023-11-25\",author:\"Ois\\xEDn Thomas Morrin\",image:\"../../public/profile.png\",majorTag:\"Tech\",tags:[\"Web Development\",\"React\",\"Browser Extension\",\"Plasmo\",null]};function Ee(c){let t=Object.assign({p:\"p\",h3:\"h3\",a:\"a\",h4:\"h4\",ul:\"ul\",li:\"li\"},c.components),{Image:m}=t;return m||yn(\"Image\",!0,\"97:3-103:5\"),(0,r.jsxDEV)(r.Fragment,{children:[(0,r.jsxDEV)(t.p,{children:\"Browser extensions have a bad reputation for security and safety, from both the users' and developer's perspective. There are critical aspects of a user experience\\u2014particularly account management and payments\\u2014that you can do on an extension, but if you really care about the experience and safety of your end user, you won't. Instead, you should do it using a separate webpage. In this article, I will discuss why and how you should manage your user onboarding, account management and subscriptions from a website associated with your extension.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h3,{children:\"What Framework should I use?\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"Extensions have been seen as the Wild West of Product Development. Most extensions are developed in some JavaScript framework: svelt, Nextjs, etc., or even vanilla js with no dedicated environment or framework until recently. [Plasmo](\",(0,r.jsxDEV)(t.a,{href:\"https://www.plasmo.com/\",children:\"Supercharge your browser extension development \\u2013 Plasmo\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:21,columnNumber:236},this),\") is a new framework for extension development that promises cross-browser support along with environment testing and CI/CD, and for anyone who wants to dive into the world of extensions, I'd highly recommend starting here. There is a vibrant community on discord and the main framework is constantly expanding, yet it very stable for most browsers (it is great with chromium-based browsers and Firefox\\u2014but Safari is still buggy).\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Additionally, Plasmo provide some great features out of the box including import management, messengers, storage API, extension pages and tab pages and a content-script UI functionality in which you can use React (and not have to fudge around with the vanilla trio of html-css-js).\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h3,{children:\"What are the Problems?\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"Google Chrome has made efforts to make the landscape of chrome extensions more safe through the update from Manifest Version 2 to 3, but a lot of things still fall short or simply obfuscate the development and impact negatively the user experience. These issues become even more prominent when you are developing a cross-browser extension. Added to this, the community for extension developers has been rather isolated and under-developed.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h4,{children:\"Cross-origin resource sharing (CORS)\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"You have the eternal problems of CORS. CORS is a protocol that decides whether a cross-origin request (e.g. a request from\\xA0\",(0,r.jsxDEV)(t.a,{href:\"https://anotherdomain.com/\",children:\"https://adomain.com\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:31,columnNumber:124},this),\"\\xA0to\\xA0\",(0,r.jsxDEV)(t.a,{href:\"https://otherdomain.com/\",children:\"https://otherdomain.com\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:31,columnNumber:177},this),\") should be allowed.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h4,{children:\"Content Security Policy (CSP)\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"CSP is layer of security that helps to detect and mitigate certain types of attacks, including Cross-Site Scripting (\",(0,r.jsxDEV)(t.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting\",children:\"XSS\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:35,columnNumber:118},this),\") and data injection attacks. These attacks are used for everything from data theft, to site defacement, to malware distribution.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"You face these depending on where you are fetching data:\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,r.jsxDEV)(\"table\",{children:[(0,r.jsxDEV)(\"thead\",{children:(0,r.jsxDEV)(\"tr\",{children:[(0,r.jsxDEV)(\"th\",{children:\"Origin\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:41,columnNumber:13},this),(0,r.jsxDEV)(\"th\",{children:\"CSP\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:42,columnNumber:13},this),(0,r.jsxDEV)(\"th\",{children:\"Cors\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:43,columnNumber:13},this),(0,r.jsxDEV)(\"th\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:44,columnNumber:13},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:40,columnNumber:9},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:39,columnNumber:5},this),(0,r.jsxDEV)(\"tbody\",{children:[(0,r.jsxDEV)(\"tr\",{children:[(0,r.jsxDEV)(\"td\",{children:\"Extension Pages\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:49,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:50,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:51,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:52,columnNumber:13},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:48,columnNumber:9},this),(0,r.jsxDEV)(\"tr\",{children:[(0,r.jsxDEV)(\"td\",{children:\"Background Script Worker\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:55,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:56,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{children:\"\\u2714\\uFE0F\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:57,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:58,columnNumber:13},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:54,columnNumber:9},this),(0,r.jsxDEV)(\"tr\",{children:[(0,r.jsxDEV)(\"td\",{children:\"Content Script\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:61,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{children:\"\\u2714\\uFE0F\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:62,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{children:\"\\u2714\\uFE0F\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:63,columnNumber:13},this),(0,r.jsxDEV)(\"td\",{},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:64,columnNumber:13},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:60,columnNumber:9},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:47,columnNumber:5},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:38,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"*this does not include CORS issues you run into from the server side\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:72,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h4,{children:\"Remote Code Execution\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:74,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"Due to\\xA0\",(0,r.jsxDEV)(t.a,{href:\"https://developer.chrome.com/docs/extensions/mv3/intro/mv3-overview/#remotely-hosted-code\",children:\"Manifest v3's restriction with remote code execution\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:76,columnNumber:8},this),\", all code executed by the extension must be present in the extension\\u2019s package uploaded to the webstore and server communication that could potentially changing extension behaviour will still be allowed. This means there are limited options to have integrations like Stripe, Hotjar etc. whereby a script is called in at runtime.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:76,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h3,{children:\"What They Don't Tell You Explicitly\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:78,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"All of this put together means that:\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:80,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:\"extension analytics and logging don't give you the same access to information. For example, you won't be able to have heatmaps etc of users going through an onboarding flow.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:82,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"using third party auth providers is out of the question because you don't have a backend for redirects, and popups are injected onto the page (which violates CSP).\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:83,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:\"having a PCI-compliant payment system, like Stripe or Paddle, integrated into an extension is awkward... at best you can use Payment Links in Stripe\\u2014which doesn't give you the same granularity of control as managing the whole checkout experience does.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:84,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:82,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"All of these issues are solved problems and perfectly workable from a website though. After looking at some of the most successful consumer browser extensions, we see this being used in Grammarly and Toucan. Therefore, I suggest a system where the extension communicates with a website that manages auth, account and subscription management via cookies.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:86,columnNumber:1},this),`\n`,(0,r.jsxDEV)(\"div\",{style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\"},children:(0,r.jsxDEV)(m,{src:\"/Backend for Chrome Extension.png\",width:\"618\",height:\"404\",alt:\"Architecture of a Browser Extension with a Backend using a Website for Authentication\",sizes:\"100vw\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:97,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:88,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:[\"We can see that the website handles the authentication and stores cookies (JWT tokens) that can be used in the extension to verify the user and access their user data. This model is similar to the one suggested by Plasmo in collaboration with \",(0,r.jsxDEV)(t.a,{href:\"https://www.plasmo.com/blog/posts/chrome-extension-auth-boilerplate-propelauth\",children:\"PropelAuth\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:106,columnNumber:244},this),\"\\u2014whereby the authentication is handled by a website and the information is fed back to the extension, just without the price-tag.\"]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:106,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h3,{children:\"Check out the example :)\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:108,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"To illustrate this point simply, I have set up a project for a website and an extension that uses Supabase as a backend, and simply pass a user-id across from the website to the extension.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:110,columnNumber:1},this),`\n`,(0,r.jsxDEV)(\"div\",{style:{width:\"100%\",height:0,paddingBottom:\"60%\",position:\"relative\",marginBottom:\"2rem\"},children:(0,r.jsxDEV)(\"video\",{autoPlay:!0,loop:!0,style:{width:\"100%\",height:\"100%\",position:\"absolute\"},children:(0,r.jsxDEV)(\"source\",{src:\"/extension_with_cookies.mp4\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:123,columnNumber:9},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:122,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:112,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:(0,r.jsxDEV)(t.a,{href:\"https://github.com/OisinThomasMorrin/react-auth-with-supabase\",children:\"React + Supabase Website\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:129,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:129,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:(0,r.jsxDEV)(t.a,{href:\"https://github.com/OisinThomasMorrin/cookie-auth\",children:\"Plasmo Extension\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:131,columnNumber:1},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:131,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"This example is without checking any user data, or validating tokens etc, but is a nice way to consolidate the idea of sharing the data in a secure way that can be seamless. Another point is that if your extension has a backend, it can be best to not house the database client directly in the extension and instead use tokens for validation, rate limiting and calling the data\\u2014you can never be too careful with people's data.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:133,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h3,{children:\"Conclusions\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:135,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.p,{children:\"I hope this article was useful for some developers in the extension space. I had to go through a lot of these learnings from this through mistakes, as it is so difficult to find resources on the topic. If anyone has any suggestions, recommendations or critiques, I'd love to hear them; the space is new and vibrant and there is so much more to be done in terms of developing the frameworks and best practices that underpin browser extensions.\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:137,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.h3,{children:\"Reading and Resources\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:139,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.ul,{children:[`\n`,(0,r.jsxDEV)(t.li,{children:(0,r.jsxDEV)(t.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP\",children:\"Content Security Policy (CSP) - HTTP | MDN (mozilla.org)\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:141,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:141,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:(0,r.jsxDEV)(t.a,{href:\"https://www.plasmo.com/blog/posts/chrome-extension-auth-boilerplate-propelauth\",children:\"Chrome Extension Authentication Boilerplate using PropelAuth (plasmo.com)\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:142,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:142,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:(0,r.jsxDEV)(t.a,{href:\"https://groups.google.com/a/chromium.org/g/chromium-extensions/c/ks--r5hDNQ0\",children:\"Remotely-hosted code (google.com)\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:143,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:143,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:(0,r.jsxDEV)(t.a,{href:\"https://docs.propelauth.com/overview\",children:\"Overview - PropelAuth\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:144,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:144,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:(0,r.jsxDEV)(t.a,{href:\"https://github.com/OisinThomasMorrin/react-auth-with-supabase\",children:\"React + Supabase Website\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:145,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:145,columnNumber:1},this),`\n`,(0,r.jsxDEV)(t.li,{children:(0,r.jsxDEV)(t.a,{href:\"https://github.com/OisinThomasMorrin/cookie-auth\",children:\"Plasmo Extension\"},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:146,columnNumber:3},this)},void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:146,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:141,columnNumber:1},this)]},void 0,!0,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\",lineNumber:1,columnNumber:1},this)}function gn(c={}){let{wrapper:t}=c.components||{};return t?(0,r.jsxDEV)(t,Object.assign({},c,{children:(0,r.jsxDEV)(Ee,c,void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\"},this)}),void 0,!1,{fileName:\"C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx\"},this):Ee(c)}var xn=gn;function yn(c,t,m){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+c+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(m?\"\\nIt\\u2019s referenced in your code at `\"+m+\"` in `C:\\\\Users\\\\oisin\\\\Desktop\\\\blog\\\\personal_blog\\\\content\\\\_mdx_bundler_entry_point-ccf9222f-999e-42b9-98d5-5133e5433c33.mdx`\":\"\"))}return hn(Nn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "extension-auth-with-cookies/index.mdx",
  "_raw": {
    "sourceFilePath": "extension-auth-with-cookies/index.mdx",
    "sourceFileName": "index.mdx",
    "sourceFileDir": "extension-auth-with-cookies",
    "contentType": "mdx",
    "flattenedPath": "extension-auth-with-cookies"
  },
  "type": "Blog",
  "url": "/blog/extension-auth-with-cookies",
  "readingTime": {
    "text": "6 min read",
    "minutes": 5.26,
    "time": 315600,
    "words": 1052
  },
  "toc": [
    {
      "level": "three",
      "text": "What Framework should I use?",
      "slug": "what-framework-should-i-use"
    },
    {
      "level": "three",
      "text": "What are the Problems?",
      "slug": "what-are-the-problems"
    },
    {
      "level": "three",
      "text": "Cross-origin resource sharing (CORS)",
      "slug": "cross-origin-resource-sharing-cors"
    },
    {
      "level": "three",
      "text": "Content Security Policy (CSP)",
      "slug": "content-security-policy-csp"
    },
    {
      "level": "three",
      "text": "Remote Code Execution",
      "slug": "remote-code-execution"
    },
    {
      "level": "three",
      "text": "What They Don't Tell You Explicitly",
      "slug": "what-they-dont-tell-you-explicitly"
    },
    {
      "level": "three",
      "text": "Check out the example :)",
      "slug": "check-out-the-example-"
    },
    {
      "level": "three",
      "text": "Conclusions",
      "slug": "conclusions"
    },
    {
      "level": "three",
      "text": "Reading and Resources",
      "slug": "reading-and-resources"
    }
  ]
}